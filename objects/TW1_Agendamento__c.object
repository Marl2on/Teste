<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>true</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <enableActivities>false</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableChangeDataCapture>false</enableChangeDataCapture>
    <enableFeeds>false</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <fields>
        <fullName>IsClosed__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>IsClosed</label>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>TW1_Caso__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Caso</label>
        <referenceTo>Case</referenceTo>
        <relationshipLabel>Agendamentos</relationshipLabel>
        <relationshipName>Agendamentos</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>TW1_Comentarios__c</fullName>
        <externalId>false</externalId>
        <label>Comentários</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>TextArea</type>
    </fields>
    <fields>
        <fullName>TW1_Conta__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Conta</label>
        <referenceTo>Account</referenceTo>
        <relationshipLabel>Agendamentos</relationshipLabel>
        <relationshipName>Agendamentos</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>TW1_Contato__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Contato</label>
        <referenceTo>Contact</referenceTo>
        <relationshipLabel>Agendamentos</relationshipLabel>
        <relationshipName>Agendamentos</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>TW1_Data_Hora_Agendamento__c</fullName>
        <externalId>false</externalId>
        <formula>TEXT(TW1_Data_do_Agendamento__c) &amp; &quot; &quot;&amp; TEXT(TW1_Hora__c)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Data/Hora Agendamento</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>TW1_Data_do_Agendamento__c</fullName>
        <externalId>false</externalId>
        <label>Data do Agendamento</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>TW1_Data_prevista_para_novo_agendamento__c</fullName>
        <externalId>false</externalId>
        <label>Data prevista para novo agendamento</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>TW1_Empreendimento__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Empreendimento</label>
        <referenceTo>TW1_Empreendimento__c</referenceTo>
        <relationshipLabel>Agendamentos</relationshipLabel>
        <relationshipName>Agendamentos</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>TW1_Hora__c</fullName>
        <externalId>false</externalId>
        <label>Hora</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>08:00</fullName>
                    <default>false</default>
                    <label>08:00</label>
                </value>
                <value>
                    <fullName>08:30</fullName>
                    <default>false</default>
                    <label>08:30</label>
                </value>
                <value>
                    <fullName>09:00</fullName>
                    <default>false</default>
                    <label>09:00</label>
                </value>
                <value>
                    <fullName>09:30</fullName>
                    <default>false</default>
                    <label>09:30</label>
                </value>
                <value>
                    <fullName>10:00</fullName>
                    <default>false</default>
                    <label>10:00</label>
                </value>
                <value>
                    <fullName>10:30</fullName>
                    <default>false</default>
                    <label>10:30</label>
                </value>
                <value>
                    <fullName>11:00</fullName>
                    <default>false</default>
                    <label>11:00</label>
                </value>
                <value>
                    <fullName>11:30</fullName>
                    <default>false</default>
                    <label>11:30</label>
                </value>
                <value>
                    <fullName>12:00</fullName>
                    <default>false</default>
                    <label>12:00</label>
                </value>
                <value>
                    <fullName>12:30</fullName>
                    <default>false</default>
                    <label>12:30</label>
                </value>
                <value>
                    <fullName>13:00</fullName>
                    <default>false</default>
                    <label>13:00</label>
                </value>
                <value>
                    <fullName>13:30</fullName>
                    <default>false</default>
                    <label>13:30</label>
                </value>
                <value>
                    <fullName>14:00</fullName>
                    <default>false</default>
                    <label>14:00</label>
                </value>
                <value>
                    <fullName>14:30</fullName>
                    <default>false</default>
                    <label>14:30</label>
                </value>
                <value>
                    <fullName>15:00</fullName>
                    <default>false</default>
                    <label>15:00</label>
                </value>
                <value>
                    <fullName>15:30</fullName>
                    <default>false</default>
                    <label>15:30</label>
                </value>
                <value>
                    <fullName>16:00</fullName>
                    <default>false</default>
                    <label>16:00</label>
                </value>
                <value>
                    <fullName>16:30</fullName>
                    <default>false</default>
                    <label>16:30</label>
                </value>
                <value>
                    <fullName>17:00</fullName>
                    <default>false</default>
                    <label>17:00</label>
                </value>
                <value>
                    <fullName>17:30</fullName>
                    <default>false</default>
                    <label>17:30</label>
                </value>
                <value>
                    <fullName>18:00</fullName>
                    <default>false</default>
                    <label>18:00</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>TW1_Responsavel__c</fullName>
        <externalId>false</externalId>
        <formula>TEXT(TW1_Unidade__r.TW1_Bloco__r.TW1_Responsavel_Manutencao_Vistoria__c)</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Responsável</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>TW1_Status__c</fullName>
        <externalId>false</externalId>
        <label>Status</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Agendado</fullName>
                    <default>false</default>
                    <label>Agendado</label>
                </value>
                <value>
                    <fullName>Concluído com sucesso</fullName>
                    <default>false</default>
                    <label>Concluído com sucesso - Vistoria Aprovada</label>
                </value>
                <value>
                    <fullName>Cancelado pelo Cliente</fullName>
                    <default>false</default>
                    <label>Cancelado pelo Cliente</label>
                </value>
                <value>
                    <fullName>Cancelado pela Engenharia</fullName>
                    <default>false</default>
                    <label>Cancelado pela Engenharia/Manutenção</label>
                </value>
                <value>
                    <fullName>Cliente não compareceu</fullName>
                    <default>false</default>
                    <label>Cliente não compareceu</label>
                </value>
                <value>
                    <fullName>Cancelado por antecipação</fullName>
                    <default>false</default>
                    <label>Cancelado por antecipação</label>
                </value>
                <value>
                    <fullName>Concluído Vistoria Reprovada</fullName>
                    <default>false</default>
                    <label>Concluído - Vistoria Reprovada</label>
                </value>
                <value>
                    <fullName>Novo</fullName>
                    <default>false</default>
                    <isActive>false</isActive>
                    <label>Novo</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>TW1_Tipo__c</fullName>
        <externalId>false</externalId>
        <formula>TW1_Caso__r.RecordType.Name</formula>
        <formulaTreatBlanksAs>BlankAsZero</formulaTreatBlanksAs>
        <label>Tipo</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>TW1_Unidade__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Unidade</label>
        <referenceTo>Product2</referenceTo>
        <relationshipLabel>Agendamentos</relationshipLabel>
        <relationshipName>Agendamentos</relationshipName>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <gender>Masculine</gender>
    <label>Agendamento</label>
    <listViews>
        <fullName>All</fullName>
        <columns>NAME</columns>
        <columns>TW1_Empreendimento__c</columns>
        <columns>TW1_Conta__c</columns>
        <columns>TW1_Contato__c</columns>
        <columns>TW1_Data_Hora_Agendamento__c</columns>
        <columns>TW1_Caso__c</columns>
        <filterScope>Everything</filterScope>
        <filters>
            <field>IsClosed__c</field>
            <operation>equals</operation>
            <value>0</value>
        </filters>
        <label>Tudo</label>
    </listViews>
    <nameField>
        <displayFormat>A# {00000000}</displayFormat>
        <label>Agenda</label>
        <trackHistory>false</trackHistory>
        <type>AutoNumber</type>
    </nameField>
    <pluralLabel>Agendamentos</pluralLabel>
    <searchLayouts>
        <customTabListAdditionalFields>TW1_Empreendimento__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>TW1_Conta__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>TW1_Data_Hora_Agendamento__c</customTabListAdditionalFields>
    </searchLayouts>
    <sharingModel>ReadWrite</sharingModel>
    <validationRules>
        <fullName>ImpedirAlteracaoConcluido</fullName>
        <active>true</active>
        <errorConditionFormula>AND(
     NOT(ISCHANGED(IsClosed__c)),
     IsClosed__c = True
   )</errorConditionFormula>
        <errorMessage>Depois de encerrado/Cancelado o agendamento não pode ser alterado.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>ImpedirMaisDeUmAgendamentoAberto</fullName>
        <active>true</active>
        <errorConditionFormula>AND(
     ISNEW(),
     TW1_Caso__r.TW1_Agendamentos_Abertos__c &gt; 0
   )</errorConditionFormula>
        <errorMessage>Existe um agendamento em aberto neste Caso. Só pode haver um agendamento aberto por Caso. Favor tratar o agendamento aberto antes de abrir um novo.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Impedir_cancelamento_engenharia_pelo_RC</fullName>
        <active>true</active>
        <errorConditionFormula>AND(
    ISCHANGED(TW1_Status__c),   
    ISPICKVAL(TW1_Status__c,&quot;Cancelado pela Engenharia&quot;),
    OR(NOT($Profile.Name = &quot;Engenharia&quot;),
       NOT($Profile.Name = &quot;Manutenção&quot;))   


    )</errorConditionFormula>
        <errorMessage>Somente um usuário da engenharia pode atualizar o status para &quot;Cancelado pela Engenharia/Manutenção&quot;</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>Impedir_data_anterior_a_data_de_inicio</fullName>
        <active>true</active>
        <errorConditionFormula>AND( 
ISNEW(),
TW1_Data_do_Agendamento__c   &lt;  TW1_Unidade__r.TW1_Data_inicio_para_agendar_vistoria__c
)</errorConditionFormula>
        <errorMessage>A data do agendamento tem que ser a partir da data inicio para agendar a vistoria.
Esta informação aparece na tela do caso</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>garantir_preenher_nova_data_agendamento</fullName>
        <active>true</active>
        <errorConditionFormula>AND( ISCHANGED(TW1_Status__c),
     ISPICKVAL(TW1_Status__c,&quot;Cancelado pela Engenharia&quot;),
     ISBLANK(TEXT(TW1_Data_prevista_para_novo_agendamento__c))
    )</errorConditionFormula>
        <errorDisplayField>TW1_Data_prevista_para_novo_agendamento__c</errorDisplayField>
        <errorMessage>Antes de cancelar, favor informar data prevista para novo agendamento.</errorMessage>
    </validationRules>
    <visibility>Public</visibility>
    <webLinks>
        <fullName>TW1_Novo_Agendamento</fullName>
        <availability>online</availability>
        <displayType>massActionButton</displayType>
        <encodingKey>UTF-8</encodingKey>
        <linkType>url</linkType>
        <masterLabel>Novo Agendamento</masterLabel>
        <openType>replace</openType>
        <protected>false</protected>
        <requireRowSelection>true</requireRowSelection>
        <url>/apex/AgendamentoVistoria?idcaso={!Case.Id}</url>
    </webLinks>
</CustomObject>
